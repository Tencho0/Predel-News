@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage<AuthorViewModel>
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    var author = Model.Author;
}

<div class="author-page">
    <header class="author-header">
        <div class="author-profile">
            @if (author.Avatar != null)
            {
                <img src="@author.Avatar.GetCropUrl(120, 120)"
                     alt="@author.Name"
                     class="author-avatar-large"
                     width="120"
                     height="120" />
            }
            else
            {
                <div class="author-avatar-placeholder">
                    <span>@author.Name.Substring(0, 1).ToUpper()</span>
                </div>
            }

            <div class="author-info-main">
                <h1 class="author-name-large">@author.Name</h1>
                @if (!string.IsNullOrEmpty(author.Bio))
                {
                    <p class="author-bio">@author.Bio</p>
                }

                <div class="author-social">
                    @if (!string.IsNullOrEmpty(author.Email))
                    {
                        <a href="mailto:@author.Email" class="social-link" aria-label="Email">
                            <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                                <polyline points="22,6 12,13 2,6"></polyline>
                            </svg>
                        </a>
                    }
                    @if (!string.IsNullOrEmpty(author.TwitterHandle))
                    {
                        <a href="https://twitter.com/@author.TwitterHandle" class="social-link" target="_blank" rel="noopener noreferrer" aria-label="Twitter">
                            <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
                            </svg>
                        </a>
                    }
                    @if (!string.IsNullOrEmpty(author.FacebookUrl))
                    {
                        <a href="@author.FacebookUrl" class="social-link" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
                            <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                            </svg>
                        </a>
                    }
                    @if (!string.IsNullOrEmpty(author.LinkedInUrl))
                    {
                        <a href="@author.LinkedInUrl" class="social-link" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
                            <svg class="icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                                <rect x="2" y="9" width="4" height="12"></rect>
                                <circle cx="4" cy="4" r="2"></circle>
                            </svg>
                        </a>
                    }
                </div>

                <p class="author-article-count">@author.ArticleCount articles published</p>
            </div>
        </div>
    </header>

    @await Html.PartialAsync("Partials/_AdSlot", new { Position = "author-top", Size = "728x90" })

    @{
        ViewData["SectionTitle"] = $"Articles by {author.Name}";
        ViewData["ShowPagination"] = true;
        ViewData["BaseUrl"] = author.GetUrl();
    }
    @await Html.PartialAsync("Partials/_LatestList", Model.Articles)
</div>

@section Scripts {
    <script type="application/ld+json">
    {
        "@@context": "https://schema.org",
        "@@type": "Person",
        "name": "@author.Name",
        "url": "@author.GetUrl()",
        @if (!string.IsNullOrEmpty(author.Bio))
        {
            <text>"description": "@Html.Raw(System.Text.Json.JsonEncodedText.Encode(author.Bio))",</text>
        }
        @if (author.Avatar != null)
        {
            <text>"image": "@author.Avatar.Url",</text>
        }
        "sameAs": [
            @if (!string.IsNullOrEmpty(author.TwitterHandle))
            {
                <text>"https://twitter.com/@author.TwitterHandle"</text>
            }
        ]
    }
    </script>
}
